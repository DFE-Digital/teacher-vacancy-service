- if @vacancies_search.location_category_search?
  = content_for :page_title_prefix, t('jobs.location_search_heading', location: format_location_name(@vacancies_search.location_category))
- else
  = content_for :page_title_prefix, t('jobs.heading')
= render partial: 'head_links'

%h1.govuk-heading-xl#job-count
  = @vacancies_search.location_category_search? ? @vacancies.total_count_message_with_location(format_location_name(@vacancies_search.location_category)) : @vacancies.total_count_message
.govuk-grid-row
  .govuk-grid-column-one-third
    = render 'filters', collapsible?: true

  .govuk-grid-column-two-thirds
    .govuk-grid-column-full.vacancies-count
      - if @vacancies.user_search?
        = render(partial: 'subscribe_link', locals: { search_criteria: @vacancies_search.only_active_to_hash }) if EmailAlertsFeature.enabled? && !ReadOnlyFeature.enabled?
    - if @vacancies.any?
      = render partial: 'sorting_options', locals: { search_criteria: @vacancies_search.only_active_to_hash, sort: @vacancies_search.sort_by }
      #vacancies-hits{ 'aria-label': 'Search results' }
        %ul.vacancies{ 'role': 'list' }
          - @vacancies.each do |vacancy|
            = render partial: 'vacancy', locals: { vacancy: vacancy }

    - elsif @vacancies.user_search?
      %p
        = t('jobs.no_jobs.intro')
        %ul.govuk-list.govuk-list--bullet
          - t('jobs.no_jobs.suggestions').each do |list_item|
            %li= list_item

    = paginate @vacancies, window: 2
    = javascript_pack_tag 'search'
