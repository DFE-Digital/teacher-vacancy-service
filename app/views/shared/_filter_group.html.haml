-# Usage to include accordion group
-# = render partial: 'shared/accordion_group', locals: { content: @vacancies_presenter.vacancies[0] , filters: { :title => 'filter group heading', :items => [{ :key => 'working_pattern', :title => 'Working patterns'}, { :key => 'subject', :title => 'Subjects', :search => true }] } }

.accordion-group.govuk-accordion{ id: 'accordion-default', data: { module: "govuk-accordion"} }

  - if filters.present?
    .govuk-accordion__section.govuk-accordion__title
      .govuk-accordion__section-header
        %h3.govuk-accordion__section-heading.accordion-group-heading
          %span.govuk-accordion__section-button{ id: "accordion-default-heading-title" }
            = filters[:title]

      .govuk-accordion__section-content{ id: "accordion-default-content-title", aria: { labelledby: "accordion-default-heading-title" } }
        %p.govuk-body
          = 'filter pills'

  - filters[:items].each_with_index do |filter, index|
    .govuk-accordion__section.accordion-content__group
      .govuk-accordion__section-header
        %h3.govuk-accordion__section-heading
          %span.govuk-accordion__section-button{ id: "accordion-default-heading-#{index}" }
            = filter[:title]

      .govuk-accordion__section-content{ id: "accordion-default-content-#{index}", aria: { labelledby: "accordion-default-heading-#{index}" } }
        = render partial: 'shared/checkbox_group', locals: { :search => filter[:search], content: content[filter[:key]], options: eval("#{filter[:key]}_options") }
