-# Usage to include filter group
-#
-# = render partial: 'shared/filter_group', locals: {
-#   filters: {
-#     :title => 'filter group heading',
-#     :items => [
-#       { :f => f, :options => <Array>, :title => 'Working patterns'},
-#       { :f => f, :options => <Array>, :title => 'Subjects', :search => true }
-#     ]
-#   }
-# }

.accordion-group.govuk-accordion{ id: 'accordion-default', data: { module: "govuk-accordion"} }

  - if filters.present? && filters[:control]
    .govuk-accordion__section.govuk-accordion__title.moj-filter
      .govuk-accordion__section-header.moj-filter__header
        %h3.govuk-accordion__section-heading.accordion-group-heading
          %span.govuk-accordion__section-button.moj-filter__heading-title{ id: "accordion-default-heading-title" }
            %h2.govuk-heading-s
              = filters[:title]

      .govuk-accordion__section-content{ id: "accordion-default-content-title", aria: { labelledby: "accordion-default-heading-title" } }
        .moj-filter__content
          .moj-filter__selected
            .govuk-heading-s{ class: 'govuk-!-margin-bottom-0' }
              = 'Subjects'

            .moj-filter__heading-action
              %p
                %a.govuk-link.govuk-link--no-visited-state{ href: ""}
                  = 'Clear filters'

            %ul.moj-filter-tags
              %li
                %a.moj-filter__tag{ href: "/path/to/remove/this" }
                  %span.govuk-visually-hidden
                    = 'Remove this filter'
                  = 'Art and design'
                  %i.fa.fa-close

          .moj-filter__selected
            .govuk-heading-s{ class: 'govuk-!-margin-bottom-0' }
              = 'Working patterns'

            %ul.moj-filter-tags
              %li
                %a.moj-filter__tag{ href: "/path/to/remove/this" }
                  %span.govuk-visually-hidden
                    = 'Remove this filter'
                  = 'Full-time'
                  %i.fa.fa-close

              %li
                %a.moj-filter__tag{ href: "/path/to/remove/this" }
                  %span.govuk-visually-hidden
                    = 'Remove this filter'
                  = 'Part-time'
                  %i.fa.fa-close

  - filters[:items].each_with_index do |filter, index|
    .govuk-accordion__section.accordion-content__group
      .govuk-accordion__section-header
        %h3.govuk-accordion__section-heading
          %span.govuk-accordion__section-button{ id: "accordion-default-heading-#{index}" }
            = filter[:title]

      .govuk-accordion__section-content{ id: "accordion-default-content-#{index}", aria: { labelledby: "accordion-default-heading-#{index}" } }
        = render 'shared/checkbox_group', filter[:search], f: f, attribute_name: :subjects, options: filter[:options], value_method: :first, text_method: :first, hint_method: :last
