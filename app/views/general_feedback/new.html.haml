= render partial: '/feedback/head'
= render partial: '/feedback/errors', locals: { feedback: @feedback }

= simple_form_for @feedback, action: :post, url: feedback_path do |f|
  .govuk-grid-row
    .govuk-grid-column-two-thirds

      .govuk-form-group.feedback-form-group
        %fieldset.govuk-fieldset
          %legend.govuk-fieldset__legend.govuk-fieldset__legend--m
            %h2.govuk-fieldset__heading
              = t('general_feedback.visit_purpose_legend')
          .govuk-radios.govuk-radios--conditional{ "data-module": "govuk-radios"}
            = f.collection_radio_buttons :visit_purpose, visit_purpose_options, :last, :first,
                                         item_wrapper_class: 'govuk-radios__item',
                                         item_wrapper_tag: 'div' do |field|
              - if field.value == :other_purpose
                = field.radio_button(class: 'govuk-radios__input', "data-aria-controls": 'conditional_visit_purpose_comment') + field.label(:class => "govuk-label govuk-radios__label") 
              - else
                = field.radio_button(class: 'govuk-radios__input') + field.label(:class => "govuk-label govuk-radios__label")

            #conditional_visit_purpose_comment.govuk-radios__conditional.govuk-radios__conditional--hidden
              = f.input :visit_purpose_comment, as: :text,
                        wrapper: :textarea,
                        label: false,
                        hint: t('general_feedback.visit_purpose_hint_text').html_safe,
                        input_html: { class: 'form-control form-control-4-4', rows: '5' }
      

      .govuk-form-group.feedback-form-group
        %fieldset.govuk-fieldset
          %legend.govuk-fieldset__legend.govuk-fieldset__legend--m
            %h2.govuk-fieldset__heading
              = t('feedback.comment_label')

        = f.input :comment, as: :text,
                    wrapper: :textarea,
                    label: false,
                    input_html: { class: 'form-control form-control-4-4', rows: '5' }

      .govuk-form-group.feedback-form-group
        %fieldset.govuk-fieldset
          %legend.govuk-fieldset__legend.govuk-fieldset__legend--m
            %h2.govuk-fieldset__heading
              = t('general_feedback.user_participation_legend')

          .govuk-radios
            .govuk-radios__item
              = f.radio_button(:user_participation_response, :interested, class: 'govuk-radios__input')
              = f.label(t('general_feedback.user_participation_options.interested'), class: "govuk-label govuk-radios__label", required: true)

              = f.input :email, as: :email,
                  label: t('general_feedback.user_interested_email_heading'),
                  hint: t('general_feedback.user_interested_email_text'),
                  wrapper_html: {id: 'email', class: "govuk-inset-text"},
                  required: true

            .govuk-radios__item
              = f.radio_button(:user_participation_response, :not_interested, class: 'govuk-radios__input')
              = f.label(t('general_feedback.user_participation_options.not_interested'), class: "govuk-label govuk-radios__label", required: true)


      = f.submit t('feedback.submit'), class: 'govuk-button'
