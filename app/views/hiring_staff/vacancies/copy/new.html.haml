- content_for :page_title_prefix, "#{@copy_form.errors.present? ? 'Error: ' : ''}Copy a job for #{current_school.name}"

%h1.govuk-heading-l
  = t('jobs.copy_page_title', job_title: @copy_form.vacancy.job_title.downcase)
  %span.govuk-caption-l
    Step 1 of 2

= simple_form_for @copy_form, html: { class: 'copy-form' }, action: :post, url: school_job_copy_path do |f|
  %h2.govuk-heading-m
    = t('jobs.job_details')

  .govuk-grid-row
    .govuk-grid-column-two-thirds
      = render 'hiring_staff/vacancies/error_messages', errors: @copy_form.errors
      = f.input :job_title,
                label: t('jobs.job_title'),
                hint: t('jobs.form_hints.job_title'),
                wrapper_html: { id: 'job_title' },
                input_html: { class: 'govuk-input' },
                required: true

      - unless @copy_form.vacancy.job_roles.present?
        = f.input :job_roles,
                  as: :check_boxes,
                  wrapper: :checkboxes,
                  label: t('jobs.job_roles'),
                  hint: t('jobs.form_hints.job_role'),
                  wrapper_html: { id: 'job_role' },
                  collection: job_role_options,
                  required: true

      - unless @copy_form.vacancy.about_school.present?
        = f.input :about_school,
                  wrapper: 'textarea',
                  as: :text,
                  label: t('jobs.about_school', school: current_school.name),
                  hint: t('helpers.hint.job_summary_form.about_school'),
                  input_html: { rows: 10, value: @vacancy.school.description.presence.to_s, },
                  wrapper_html: { id: 'about_school' },
                  required: true

      %div.govuk-form-group#starts_on
        = f.gov_uk_date_field :starts_on,
                              legend_options: { page_heading: false, class: "govuk-label" }

      %div.govuk-form-group#ends_on
        = f.gov_uk_date_field :ends_on,
                              legend_options: { page_heading: false, class: "govuk-label" }

      %h2.govuk-heading-m
        = t('jobs.application_details')

      %div.govuk-form-group#publish_on
        = f.gov_uk_date_field :publish_on,
                              legend_options: { page_heading: false, class: "govuk-label" }

      %div.govuk-form-group#expires_on
        = f.gov_uk_date_field :expires_on,
                              legend_options: { page_heading: false, class: "govuk-label" }

      = render 'hiring_staff/vacancies/expiry_time_field', f: f, form: @copy_form

      = f.button :submit, t('buttons.save_and_continue')
